\PassOptionsToPackage{unicode=true}{hyperref} % options for packages loaded elsewhere
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[letterpaper]{article}
\usepackage{lmodern}
\usepackage{xcolor}
\usepackage{fontspec}
\usepackage{minted}
\usepackage{cite}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage[margin=1in]{geometry}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provides euro and other symbols
\else % if luatex or xelatex
  \usepackage{unicode-math}
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage[]{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\usepackage{hyperref}
\hypersetup{
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{longtable,booktabs}
% Fix footnotes in tables (requires footnote package)
\IfFileExists{footnote.sty}{\usepackage{footnote}\makesavenoteenv{longtable}}{}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

\bibliographystyle{abbrv}

\date{}

\begin{document}

\flushbottom
\thispagestyle{empty}



\hypertarget{modifying-the-bgp-extrapolator}{%
\section{Modifying the bgp-extrapolator}
\label{modifying-the-bgp-extrapolator}}

This document describes how the internals of the extrapolator work if
you want to make custom modifications to the source.

\hypertarget{classes-and-structs}{%
\subsection{Classes and Structs}\label{classes-and-structs}}

\hypertarget{extrapolator}{%
\subsubsection{Extrapolator}\label{extrapolator}}

Purpose: Handle the logic of the announcement propagation process. The
extrapolator is intended to simulate propagation for every AS's set of
announcements based upon a seeded announcements from BGP Monitors. The
Extrapolator class is a singleton.

How: The extrapolator contains an instance of
\protect\hyperlink{ASGraph}{ASGraph} and
\protect\hyperlink{SQLQuerier}{SQLQuerier}.

The extrapolation process is as follows:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Create a directed graph of ASes based on AS relationship data in
  database.
\item
  Collect a batch of announcements that correspond to a subset of
  prefixes from the MRT Announcements. The size of this subset is
  dependent on the desired memory load of a single process.
\item
  Using the AS\_PATHs of this batch of announcements collected by
  monitors, give announcements to ASes found on their respective
  AS\_PATHs. These seeded announcements are known to have traveled
  there.
\item
  For better approximation, if (via AS\_PATH) we know that an
  announcement was sent to a peer or provider of an AS it was likely
  sent to all other peers and providers of that AS. For this reason we
  do just that before continuing.
\item
  Following ordered ranking (See \protect\hyperlink{ASGraph}{ASGraph}),
  announcements are propagated upwards starting at the bottom
  (customers) and working their way towards the top (providers).
\item
  Again following ordered ranking, announcements are propagated out to
  peers.
\item
  Again following ordered ranking, announcements are propagated
  downwards from the top and working their way to the bottom.
\item
  Once propagation is completed for the current batch of prefixes, the
  results are saved to a results table in the database.
\item
  Clear all announcement data from the AS Graph.
\item
  Repeat steps 2-8 for desired iterations or until all prefixes have
  been used.
\end{enumerate}

\hypertarget{prefix}{%
\subsubsection{Prefix}\label{prefix}}

Purpose: A compact representation of the prefix advertised by an
announcement.

How: IPv4 address and netmask are stored as unsigned 32 bit integers.

(See Prefix.h)

\hypertarget{announcement}{%
\subsubsection{Announcement}\label{announcement}}

Purpose: Represent a BGP announcement sent between ASes to advertise
prefix-origin pairs.

How: An Announcement instance keeps record of the
\protect\hyperlink{Prefix}{prefix} it advertises, the origin AS
advertising it, and other data relevant to the best path selection
process.

(See Announcement.h)

\hypertarget{as}{%
\subsubsection{AS}\label{as}}

Purpose: AS objects represent a node in the AS Graph.

How: The AS struct, identified by an Autonomous System Number(ASN),
keeps track of the other ASes it has relationships to as well as a set
of BGP announcements it wants to keep, discarding those it prefers less.
In BGP terminology, this set of preferred announcements is the Loc-RIB.

(See AS.h/cpp)

\hypertarget{asgraph}{%
\subsubsection{ASGraph}\label{asgraph}}

Purpose: The ASGraph struct is responsible for creating and keeping
track of all \protect\hyperlink{AS}{ASes}.

How: Using a \protect\hyperlink{Querier}{Querier}, AS relationship data
is retrieved from a local database and is used to create a graph of the
BGP network, with ASes as the vertices and their relationships as the
edges. ASes are then grouped topographically. To do so each AS is given
a rank that is its maximum distance to the ``bottom'' of the AS network.

The global network of ASes has a tree-like shape, where the shape is
wider towards the bottom (ASes with few to no customers) and slimmer
toward the top (ASes with few to no providers). With this understanding,
we can define top and bottom ASes as having no providers or customers
respectively.

(See ASGraph.h/cpp)

\hypertarget{sqlquerier}{%
\subsubsection{SQLQuerier}\label{sqlquerier}}

Purpose: The Querier struct serves as an interface between the program
and the database.

How: Its function calls provide SQL queries to the database and return
responses. To do so it uses \href{https://github.com/jtv/libpqxx}{pqxx},
the official C++ Client API for PostgreSQL.

(See SQLQuerier.h/cpp)


\nocite{*}
\bibliography{develop}
\end{document}

